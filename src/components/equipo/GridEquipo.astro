---
/* src/components/equipo/GridEquipo.astro - CalibraciÃ³n: Seda & Consistencia */

import { socios } from '../../data/socios.js';

const listaSocios = Object.keys(socios).map((key) => {
  const s = socios[key];
  return {
    nombre: s.nombre,
    cargo: s.cargo,
    slug: key,
    foto: s.imagen 
  };
});

const sociosProcesados = listaSocios; 
---

<section 
  id="equipo" 
  class="relative bg-white pt-10 pb-32 md:pt-28 md:pb-48 overflow-hidden scroll-mt-24"
>
  <div class="max-w-[1440px] mx-auto px-6 md:px-28 relative">
    
    <div class="flex flex-col items-center">
      
      <div class="w-full md:w-auto flex justify-start md:absolute md:left-28 md:top-0 z-20 mb-16 md:mb-0">
        <div class="flex flex-row md:flex-col items-center gap-6 observer-element-equipo opacity-0">
          <span class="label-vertical-style">
            Nuestro Equipo
          </span>
          <div class="h-[1px] w-12 md:w-[1px] md:h-24 bg-[var(--color-oro-noble)] opacity-30"></div>
        </div>
      </div>

      <div class="w-full flex justify-center items-center">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-16 md:gap-24 w-full max-w-[850px] justify-items-center equipo-trigger">
          {sociosProcesados.map((socio) => (
            <a 
              href={`/talento/${socio.slug}`} 
              class="group flex flex-col items-center text-center observer-element-equipo no-underline outline-none opacity-0" 
              style="transition-delay: 0.3s"
              aria-label={`Ver perfil de ${socio.nombre}`}
            >
              
              <div class="w-[180px] md:w-[230px] aspect-[4/5] md:aspect-[3/4] bg-[#F8F8F8] overflow-hidden grayscale group-hover:grayscale-0 transition-all duration-1000 relative border border-[var(--color-bosque)]/5">
                <img
  src={socio.foto}
  alt={`Abogado ${socio.nombre} | Socio de la firma Bahos & Burbano - Capital Intelectual`}
  title={`${socio.nombre} - ${socio.cargo}`}
  class="w-full h-full object-cover transition-transform duration-[2.5s] ease-out group-hover:scale-105 antialiased"
  loading="eager"
  decoding="async"
/>
              </div>

              <div class="mt-8 flex flex-col items-center gap-4 w-full">
                {/* NOMBRE: Cambio de color sedoso al hover */}
                <h3 class="font-['ClashDisplay'] font-semibold tracking-[0.12em] text-[20px] md:text-[22px] text-[var(--color-bosque)] group-hover:text-[var(--color-oro-tecnico)] transition-colors duration-700 leading-none antialiased">
                  {socio.nombre}
                </h3>

                {/* ESTELA AXIAL GRADIENTE: El toque de alta costura */}
                <div class="h-[1px] w-12 bg-gradient-to-r from-transparent via-[var(--color-oro-noble)] to-transparent opacity-40 transition-all duration-1000 ease-out group-hover:w-24 group-hover:opacity-80" aria-hidden="true"></div>

                {/* CARGO */}
                <span class="font-sans text-[9px] tracking-[0.4em] uppercase font-bold text-[var(--color-bosque)] opacity-60">
                  {socio.cargo}
                </span>
              </div>
            </a>
          ))}
        </div>
      </div>
    </div>

  </div>
</section>

<script is:inline>
  {
    const trigger = document.querySelector('.equipo-trigger');
    const items = document.querySelectorAll('.observer-element-equipo');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          items.forEach(el => el.classList.add('is-visible'));
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.15 });

    if (trigger) observer.observe(trigger);
  }
</script>

<style is:global>
  .label-vertical-style {
    font-family: 'ClashDisplay', sans-serif;
    color: var(--color-oro-tecnico);
    font-size: 14px;
    letter-spacing: 0.8em;
    text-transform: uppercase;
    font-weight: 400;
    white-space: nowrap;
    writing-mode: horizontal-tb;
  }

  @media (min-width: 768px) {
    .label-vertical-style {
      writing-mode: vertical-rl;
      transform: rotate(180deg);
    }
  }

  .observer-element-equipo {
    opacity: 0;
    transform: translate3d(0, 40px, 0);
    transition: opacity 1.8s cubic-bezier(0.16, 1, 0.3, 1), 
                transform 1.8s cubic-bezier(0.16, 1, 0.3, 1);
    will-change: transform, opacity;
  }

  .observer-element-equipo.is-visible {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  .group:focus-visible {
    outline: 2px solid var(--color-oro-noble);
    outline-offset: 8px;
  }
</style>