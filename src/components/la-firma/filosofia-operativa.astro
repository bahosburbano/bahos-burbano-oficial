---
/* FilosofiaOperativa.astro - Versión Cerrada: Jerarquía y Foco Institucional */
---

<section 
  class="relative bg-white py-20 md:py-48 overflow-hidden z-10"
  aria-labelledby="filosofia-section-title"
>
  
  <div class="max-w-[1440px] mx-auto px-6 md:px-28">
    
    <div class="grid grid-cols-1 md:grid-cols-[25%_75%] items-start">
      
      <div class="hidden md:flex flex-col items-center justify-start h-full pt-2 observer-element-filosofia">
        <div class="axial-v-trail-long mb-8" aria-hidden="true"></div>
        <span class="font-sans text-[12px] tracking-[0.8em] text-[var(--color-oro-tecnico)] uppercase font-bold [writing-mode:vertical-lr] rotate-180 antialiased">
          Filosofía Operativa
        </span>
      </div>

      <div class="flex flex-col gap-10 md:gap-28 pl-0 md:pl-20">
        
        <div class="observer-element-filosofia" style="transition-delay: 0.3s;">
          <h2 id="filosofia-section-title" class="filosofia-heading text-[var(--color-bosque)] max-w-[850px] antialiased">
            El Derecho como<br class="hidden md:block" />
            Arquitectura de Poder
          </h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-20">
          
          <div class="flex flex-col gap-12 md:gap-14 observer-element-filosofia" style="transition-delay: 0.6s;">
            <div class="relative pl-6 md:pl-10">
              <div class="axial-v-trail-thin" aria-hidden="true"></div>
              <p class="filosofia-paragraph text-[var(--color-bosque)] opacity-90 antialiased">
                Definimos el derecho como el sistema que organiza el poder. 
              </p>
            </div>
            <div class="relative pl-6 md:pl-10">
              <div class="axial-v-trail-thin" aria-hidden="true"></div>
              <p class="filosofia-paragraph text-[var(--color-bosque)] opacity-90 antialiased">
                Intervenimos estructuras corporativas e institucionales para 
                convertirlas en activos jurídicos resilientes.
              </p>
            </div>
          </div>

          <div class="relative observer-element-filosofia" style="transition-delay: 0.9s;">
            <div class="bg-[var(--color-bosque)] p-8 md:p-14 shadow-xl relative overflow-hidden group">
              <div class="axial-h-trail-top" aria-hidden="true"></div>
              
              <p class="font-['Hanken+Grotesk'] text-[18px] md:text-[20px] font-medium text-white leading-relaxed tracking-[0.01em] antialiased">
                Operamos donde convergen Empresa y Estado, con un rigor técnico 
                propio de decisiones estructurales.
              </p>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  {
    const options = { threshold: 0.15, rootMargin: "0px 0px -50px 0px" };
    const observerFilo = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          observerFilo.unobserve(entry.target);
        }
      });
    }, options);

    document.querySelectorAll('.observer-element-filosofia').forEach(el => observerFilo.observe(el));
  }
</script>

<style>
  /* --- TIPOGRAFÍA Y ESCALA --- */
  .filosofia-heading {
    font-family: 'ClashDisplay', sans-serif;
    font-weight: 700; /* Bold, no Black para respetar el H1 */
    font-size: clamp(34px, 5vw, 68px);
    line-height: 1.05;
    letter-spacing: -0.02em; /* Tracking sugerido por auditoría */
  }

  .filosofia-paragraph {
    font-family: 'Hanken Grotesk', sans-serif;
    font-size: clamp(17px, 2vw, 20px);
    line-height: 1.5;
    letter-spacing: 0.01em;
  }

  /* --- SISTEMA DE ESTELAS (SINCRO SEDA) --- */
  .axial-v-trail-long {
    width: 1px; height: 0;
    background: linear-gradient(to bottom, transparent, var(--color-oro-noble) 50%, transparent);
    transition: height 2.5s cubic-bezier(0.16, 1, 0.3, 1), opacity 2s ease;
    opacity: 0;
  }
  .is-visible .axial-v-trail-long { height: 120px; opacity: 0.4; }

  .axial-v-trail-thin {
    position: absolute; left: 0; top: 0; width: 1.5px; height: 100%;
    background: linear-gradient(to bottom, var(--color-oro-noble) 0%, rgba(184, 148, 79, 0) 100%);
    transform: scaleY(0); transform-origin: top;
    transition: transform 2s cubic-bezier(0.16, 1, 0.3, 1), opacity 1s ease;
    transition-delay: 1s; opacity: 0;
  }
  .is-visible .axial-v-trail-thin { transform: scaleY(1); opacity: 0.6; }

  .axial-h-trail-top {
    position: absolute; top: 0; left: 0; height: 1.5px; width: 0;
    background: linear-gradient(to right, var(--color-oro-noble) 0%, rgba(184, 148, 79, 0) 100%);
    transition: width 3s cubic-bezier(0.16, 1, 0.3, 1);
    transition-delay: 1.4s;
  }
  .is-visible .axial-h-trail-top { width: 100%; }

  /* EFECTO SEDA: 40px Glide + 2.4s */
  .observer-element-filosofia {
    opacity: 0;
    transform: translate3d(0, 40px, 0);
    transition: opacity 2.4s cubic-bezier(0.16, 1, 0.3, 1), 
                transform 2.4s cubic-bezier(0.16, 1, 0.3, 1);
    will-change: transform, opacity;
  }

  .observer-element-filosofia.is-visible {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  /* OPTIMIZACIÓN MÓVIL (Sin !important) */
  @media (max-width: 768px) {
    .filosofia-heading { font-size: 34px; line-height: 1.2; }
    .filosofia-paragraph { font-size: 17px; }
    .axial-v-trail-long { height: 80px; }
    .is-visible .axial-v-trail-long { height: 80px; }
  }

  @media (prefers-reduced-motion: reduce) {
    .observer-element-filosofia { opacity: 1 !important; transform: none !important; transition: none !important; }
    .axial-v-trail-long, .axial-v-trail-thin, .axial-h-trail-top { transition: none !important; opacity: 1 !important; transform: none !important; }
  }
</style>